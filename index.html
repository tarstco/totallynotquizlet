<!DOCTYPE html>
<html lang="en"> <!-- Theme class will be applied to <body> by JS -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Totally Not Quizlet</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- UPDATED: Added heavier font weights (600, 800, 900) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <!-- Tailwind for layout classes (flex, grid, p-*, m-*, etc) -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<!-- 
  JavaScript will add class="light-mode" here for light mode.
  Base styles (dark mode) are applied by default.
-->
<body>

    <!-- MODIFIED: Added 'relative' for positioning the toggle button -->
    <div id="app-container" class="max-w-3xl mx-auto p-4 md:p-8 min-h-screen relative flex flex-col">
        
        <!-- NEW: Settings Button -->
        <button id="settings-button" class="absolute top-6 left-6 md:top-8 md:left-10 z-50 p-2 rounded-full transition-all duration-300 hidden">
            <!-- Settings Icon -->
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.096 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
        </button>

        <!-- Theme Toggle Button -->
        <button id="theme-toggle-button" class="absolute top-6 right-6 md:top-8 md:right-10 z-50 p-2 rounded-full transition-all duration-300">
            <!-- MODIFIED: Replaced SVG with ☼ character and sized it -->
            <span id="theme-icon-sun" class="text-3xl" style="line-height: 1;">☼</span>
            <!-- Moon icon (shown in light mode, toggles to dark) -->
            <svg id="theme-icon-moon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
        </button>
        
        <!-- MODIFIED: Added pt-12 to make room for toggle button -->
        <header class="mb-6 pt-12">
            <!-- MODIFIED: Added id="header-title" -->
            <h1 id="header-title" class="text-3xl text-center mb-6">Totally Not Quizlet</h1>
            <!-- MODIFIED: Removed bg/shadow classes -->
            <nav class="flex justify-center p-2 space-x-1 md:space-x-2">
                <!-- MODIFIED: Removed color/font/padding classes -->
                <button data-mode="flashcards" class="nav-button flex-1 rounded-md">Flashcards</button>
                <button data-mode="learn" class="nav-button flex-1 rounded-md">Learn</button>
                <button data-mode="create" class="nav-button flex-1 rounded-md">Create</button>
                <!-- MODIFIED: Removed color/font/padding classes. Added hidden class. -->
                <button id="share-deck-button" class="flex-1 rounded-md hidden">Share Deck</button>
            </nav>
        </header>

        <!-- MODIFIED: Added flex-grow to push footer down -->
        <main id="main-content" class="flex-grow">

            <!-- Empty Deck State -->
            <!-- MODIFIED: Removed color/bg/shadow classes, kept padding -->
            <div id="empty-deck-view" class="app-view text-center p-8 md:p-12 rounded-lg">
                <h2 class="text-2xl font-semibold mb-4">Your deck is empty!</h2>
                <p class="mb-6">Please create a new deck to get started.</p>
                <!-- MODIFIED: Removed color/bg classes -->
                <button data-mode="create" class="nav-button main-action-button font-medium py-3 px-6 rounded-lg">
                    Create a Deck
                </button>
            </div>

            <!-- Create Deck View -->
            <!-- MODIFIED: Overhauled the entire create-view -->
            <div id="create-view" class="app-view">
                <div id="create-form-container" class="space-y-6">

                    <!-- Title Input -->
                    <div>
                        <input type="text" id="deck-title-input" class="w-full" placeholder="Enter a title, like &quot;Biology - Chapter 4&quot;">
                        <label for="deck-title-input" class="create-label">TITLE</label>
                    </div>

                    <!-- Toggle Buttons -->
                    <div class="flex space-x-2">
                        <button id="toggle-manual-button" class="create-toggle-button active">
                            Manual Entry
                        </button>
                        <button id="toggle-paste-button" class="create-toggle-button">
                            Import from Text
                        </button>
                    </div>

                    <!-- Manual Input Section -->
                    <div id="manual-input-section" class="space-y-4">
                        <div id="card-editor-list" class="space-y-3">
                            <!-- Card rows will be inserted here by JS -->
                        </div>
                        <button id="add-card-button" class="w-full">
                            + ADD CARD
                        </button>
                    </div>

                    <!-- Paste Input Section -->
                    <div id="paste-input-section" class="hidden space-y-4">
                        <p id="create-example-guide" class="text-sm p-3 rounded-md">
                            Paste your terms and definitions here, separated by a comma. Put each new pair on a new line.
                            <br>
                            <strong>Example Format:</strong><br>
                            Capital of France, Paris<br>
                            2 + 2, 4
                        </p>
                        <textarea id="deck-input-area" class="w-full h-64 p-3 rounded-lg focus:outline-none" placeholder="Enter deck data here..."></textarea>
                    </div>

                    <!-- Create Deck Button -->
                    <button id="parse-deck-button" class="main-action-button mt-4 w-full font-medium py-3 px-6 rounded-lg">
                        Create Deck
                    </button>
                </div>
            </div>

            <!-- Flashcard Mode View -->
            <!-- FIXED: Removed the 'hidden' class that was causing the bug -->
            <div id="flashcards-view" class="app-view">
                <!-- MODIFIED: Increased height -->
                <div class="perspective-container h-96">
                    <!-- MODIFIED: Removed shadow/border classes, increased rounded-lg -->
                    <div id="flashcard-container" class="flashcard relative w-full h-full cursor-pointer rounded-2xl">
                        <!-- MODIFIED: Removed color/bg classes, kept padding -->
                        <div id="flashcard-front" class="card-face absolute w-full h-full p-6 rounded-2xl flex items-center justify-center">
                            <p class="text-3xl font-medium text-center"></p>
                        </div>
                        <!-- MODIFIED: Removed color/bg classes, kept padding -->
                        <div id="flashcard-back" class="card-face card-back absolute w-full h-full p-6 rounded-2xl flex items-center justify-center">
                            <p class="text-2xl font-medium text-center"></p>
                        </div>
                    </div>
                </div>

                <div id="flashcard-nav" class="flex justify-between items-center mt-6">
                    <!-- MODIFIED: Removed "Prev" text -->
                    <button id="prev-card-button" class="py-2 px-5 rounded-lg font-medium">&larr;</button>
                    <!-- MODIFIED: Removed color class -->
                    <div id="card-counter" class="font-medium">1 / 10</div>
                    <!-- MODIFIED: Removed "Next" text -->
                    <button id="next-card-button" class="py-2 px-5 rounded-lg font-medium">&rarr;</button>
                </div>
            </div>

            <!-- Learn Mode View -->
            <!-- FIXED: Removed the 'hidden' class that was causing the bug -->
            <div id="learn-view" class="app-view">
                <!-- MODIFIED: Removed color/bg/shadow classes, kept padding -->
                <div id="learn-mode-disabled" class="text-center p-8 md:p-12 rounded-lg hidden">
                    <h2 class="text-2xl font-semibold mb-4">Learn Mode Needs More Cards</h2>
                    <p>Learn mode requires at least 4 cards to generate quizzes. Please add more cards to your deck.</p>
                </div>

                <div id="learn-mode-quiz" class="hidden">
                    <!-- MODIFIED: Removed color/bg/shadow classes, kept padding -->
                    <div id="learn-question-box" class="p-6 rounded-2xl mb-6 min-h-[150px] flex items-center justify-center">
                        <p id="learn-term" class="text-3xl font-medium text-center"></p>
                    </div>

                    <div id="learn-options" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Options will be dynamically inserted here -->
                        <!-- Example: <button class="learn-option p-4 rounded-xl border text-left"></button> -->
                    </div>

                    <!-- MODIFIED: Removed color/padding classes -->
                    <div id="learn-feedback" class="mt-6 p-4 rounded-lg text-center font-medium hidden"></div>
                </div>

                <!-- NEW: Learn Complete View -->
                <div id="learn-complete-view" class="text-center p-8 md:p-12 rounded-lg hidden">
                    <h2 class="text-2xl font-semibold mb-4">You've mastered this round!</h2>
                    <p class="mb-8">You answered all questions correctly.</p>
                    <div class="flex flex-col md:flex-row gap-4 justify-center">
                        <button id="learn-restart-button" class="main-action-button font-medium py-3 px-6 rounded-lg">
                            Start Again
                        </button>
                        <button id="learn-switch-type-button" class="secondary-action-button font-medium py-3 px-6 rounded-lg">
                            Switch to Type (Coming Soon)
                        </button>
                    </div>
                </div>
            </div>

        </main>

        <!-- NEW: Footer -->
        <footer class="text-center p-6 mt-8 border-t">
            <p class="mb-2">Created by someone</p>
            <button id="about-button" class="underline cursor-pointer">About</button>
        </footer>
        
        <!-- Toast Notification -->
        <!-- MODIFIED: Removed ALL classes, will be handled by CSS -->
        <div id="toast-notification" class="fixed bottom-6 right-6 py-3 px-5 rounded-lg shadow-xl opacity-0 translate-y-4 transition-all duration-300 z-50">
            <!-- Content set by JS -->
        </div>

    </div>

    <!-- NEW: About Modal -->
    <div id="about-modal-overlay" class="fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="modal-backdrop fixed inset-0"></div>
        <div id="about-modal-content" class="relative w-full max-w-md p-6 md:p-8 rounded-2xl">
            <button id="about-modal-close" class="absolute top-4 right-5 text-3xl font-bold">&times;</button>
            <h2 class="text-2xl font-bold mb-4">About This Site</h2>
            <p>
                This study site was created to be an alternative to other options that bombard you 
                with ads or make you pay to use them. The site includes flashcards and multiple 
                choice questions with AI to intelligently help you memorize for school! With the 
                base64 URLs, you can share study sets you've created without having to create an 
                account and risk getting your personal information sold. Simply press the "Share 
                Deck" button in the top menu to instantly copy the link to your clipboard for fast 
                sharing. Your progress is stored locally in your browser and will not be deleted 
                unless you clear your history or switch devices. This site is still under works 
                and will contine to bring new features over time. Enjoy studying!
            </p>
        </div>
    </div>
    <!-- End About Modal -->

    <!-- NEW: Settings Modal -->
    <div id="settings-modal-overlay" class="fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="modal-backdrop fixed inset-0"></div>
        <div id="settings-modal-content" class="relative w-full max-w-md p-6 md:p-8 rounded-2xl space-y-6">
            <button id="settings-modal-close" class="absolute top-4 right-5 text-3xl font-bold">&times;</button>
            <h2 class="text-2xl font-bold mb-4">Study Set Settings</h2>
            
            <!-- Setting: Deck Title -->
            <div>
                <label for="setting-deck-title" class="create-label">DECK TITLE</label>
                <input type="text" id="setting-deck-title" class="w-full" placeholder="Enter a title...">
            </div>

            <!-- Setting: Shuffle -->
            <div>
                <label class="create-label">SHUFFLE CARDS</label>
                <button id="setting-toggle-shuffle" class="settings-toggle-button w-full">
                    Shuffle
                </button>
            </div>

            <!-- Setting: Start With -->
            <div>
                <label class="create-label">START WITH</label>
                <button id="setting-toggle-start-with" class="settings-toggle-button w-full">
                    Term
                </button>
            </div>

        </div>
    </div>
    <!-- End Settings Modal -->


    <script src="script.js"></script>
</body>
</html>

